<!-- åŠ è½½çŠ¶æ€ -->
<view wx:if="{{loading}}" class="loading-container">
  <text>åŠ è½½ä¸­...</text>
</view>

<!-- é”™è¯¯æç¤º -->
<view wx:if="{{error}}" class="error-container">
  <text>{{error}}</text>
</view>

<!-- ä¹¦ç±åˆ—è¡¨ -->
<scroll-view scroll-y enable-flex style="height: 100vh;" bindscrolltolower="onReachBottom">
  <view 
    wx:for="{{ancientTexts}}" 
    wx:key="id" 
    class="book-item"
    bindtap="navigateToDetail" 
    data-index="{{index}}"
  >
    <!-- å›¾ç‰‡åŒºåŸŸ -->
    <view class="image-container">
      <image 
        src="{{item.safeImage}}" 
        mode="aspectFill" 
        class="book-image"
        data-index="{{index}}"
        binderror="handleImageError"
        bindload="handleImageLoad"
      />
      
      <!-- å›¾ç‰‡åŠ è½½çŠ¶æ€ -->
      <view wx:if="{{!item.imageLoaded && !item.imageError}}" class="image-loading">
        <text>åŠ è½½ä¸­...</text>
      </view>
      
      <!-- é”™è¯¯æç¤º -->
      <view wx:if="{{item.imageError}}" class="image-error">
        <text>å›¾ç‰‡åŠ è½½å¤±è´¥</text>
      </view>
    </view>
    
    <!-- æ–‡å­—å†…å®¹åŒºåŸŸ -->
    <view class="book-content">
      <view class="title">{{item.title}}</view>
      <view class="meta">
        <text class="author">{{item.author}}</text>
        <text class="dynasty">[{{item.dynasty}}]</text>
      </view>
      <view class="description">{{item.description}}</view>
    </view>
  </view>
  
  <!-- åˆ—è¡¨åº•éƒ¨æç¤º -->
  <view wx:if="{{!loading && ancientTexts.length > 0}}" class="list-end">
    <text>â€”â€” å·²åŠ è½½å…¨éƒ¨ä¹¦ç± â€”â€”</text>
  </view>
</scroll-view>

<!-- åœ¨æ–‡ä»¶åº•éƒ¨æ·»åŠ  -->
<view class="float-nav-tool" bindtap="navigateToIndex">
  <text class="float-nav-icon">ğŸ </text>
</view>